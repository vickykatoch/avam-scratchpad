"use strict";!function(){function e(e,t){var o="function"==typeof e;return o?e:e&&t}function t(e,t){this.grid=e,this.options=t||{}}t.prototype.name="AggregationsView",t.prototype.setAggregateGroups=function(t,o){if(t=t||this.options.aggregations,o=o||this.options.groups,!t||!o)throw"Expected both an aggregations hash and a group list.";var i=o.length,n=this.grid,s=n.behavior,a=s.dataModel;if(i){var r=window.fin.Hypergrid.analytics;s.setPipeline([e(this.options.includeFilter,r.DataSourceGlobalFilter),r.DataSourceAggregator,e(this.options.includeSorter,r.DataNodeGroupSorter)],{stash:"default",apply:!1})}var l=a.findDataSourceByType("aggregator"),c=s.getColumnProperties(l.treeColumnIndex),g=n.properties;return i?(l.setAggregateGroups(t,o),s.reindex()):l.setAggregateGroups({},[]),s.createColumns(),s.changed(),i?(this.editableWas=!!c.editable,c.editable=!1,this.cellSelectionWas=!!c.cellSelection,c.cellSelection=!1,this.checkboxOnlyRowSelectionsWas=g.checkboxOnlyRowSelections,g.checkboxOnlyRowSelections=!0):(c.editable=this.editableWas,c.cellSelection=this.cellSelectionWas,g.checkboxOnlyRowSelections=this.checkboxOnlyRowSelectionsWas,s.unstashPipeline()),n.selectionModel.clear(),n.clearMouseDown(),i},window.fin.Hypergrid.AggregationsView=t}();